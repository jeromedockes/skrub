{% macro th(name, ascending, descending) %}
<th class="sort-button-group-wrapper" scope="col" >
    {% if name %}
    <span class="margin-r-t">{{ name }}</span>
    {% endif %}
    <div class="sort-button-group">
    <button class="sort-button" data-role="sort-button" data-direction="ascending" title="Sort {{ ascending }}">
        {% include "icons/arrow-down.svg" %}
    </button>
    <button class="sort-button" data-role="sort-button" data-direction="descending" title="Sort {{ descending }}">
        {% include "icons/arrow-up.svg" %}
    </button>
    </div>
</th>
{% endmacro %}

{% macro th1(name, low, high) %}
{{ th(name, "from columns with " + low + " to columns with " + high, "from columns with " + high + " to columns with " + low) }}
{% endmacro %}

<article class="wrapper" data-show-on="NON_EMPTY_COLUMN_FILTER_SELECTED"
         data-hide-on="EMPTY_COLUMN_FILTER_SELECTED">
    <div class="horizontal-scroll">
        <table class="pure-table pure-table-bordered"
               data-manager="sortableTable">
            <thead>
                <tr>
                    {{ th("Index", "from first column to last column", "from last column to first column") }}
                    {{ th("Column name", "by column name from A to Z", "by column name from Z to A") }}
                    {{ th("dtype", "by dtype from A to Z", "by dtype from Z to A") }}
                    {{ th1("Null values", "the fewest null values", "the most null values") }}
                    {{ th1("Unique values", "the fewest unique values", "the most unique values") }}
                    {{ th1("Mean", "the lowest mean", "the highest mean") }}
                    {{ th1("Std", "the lowest standard deviation", "the highest standard deviation") }}
                    {{ th1("Min", "the lowest minimum value", "the highest minimum value") }}
                    {{ th1("Median", "the lowest median", "the highest median") }}
                    {{ th1("Max", "the lowest maximum value", "the highest maximum value") }}
                </tr>
            </thead>
            <tbody>
                {% for column in summary.columns %}
                <tr data-manager="FilterableColumn"
                    data-column-name="{{ column.name }}"
                    data-column-idx="{{ loop.index0 }}">
                    <td data-value="{{ loop.index0 }}" data-numeric>{{ loop.index0 }}</td>
                    <td>{{ column.name }}</td>
                    <td>{{ column.dtype }}</td>
                    <td class="{{ column.nulls_level }}" data-value="{{ column.null_count }}" data-numeric>
                        {{ column.null_count }} ({{ column.null_proportion | format_percent }})
                    </td>

                    {% if column.n_unique %}
                    <td data-value="{{ column.n_unique }}" data-numeric>{{ column.n_unique }} ({{ column.unique_proportion | format_percent }})
                    </td>
                    {% else %}
                    <td data-value="nan" data-numeric></td>
                    {% endif %}

                    {% if "mean" in column %}
                    <td data-value="{{ column['mean'] }}" data-numeric>{{ column["mean"] | format_number }}</td>
                    <td data-value="{{ column['standard_deviation'] }}" data-numeric>{{ column["standard_deviation"] | format_number }}</td>
                    {% else %}
                    <td data-value="nan" data-numeric></td>
                    <td data-value="nan" data-numeric></td>
                    {% endif %}

                    {% if column.quantiles %}
                    <td data-value="{{ column.quantiles[0.0] }}" data-numeric>{{ column.quantiles[0.0] | format_number }}</td>
                    <td data-value="{{ column.quantiles[0.5] }}" data-numeric>{{ column.quantiles[0.5] | format_number }}</td>
                    <td data-value="{{ column.quantiles[1.0] }}" data-numeric>{{ column.quantiles[1.0] | format_number }}</td>
                    {% elif "min" in column %}
                    <td data-value="{{ column.min }}" data-numeric>{{ column.min | format_number }}</td>
                    <td data-value="nan" data-numeric></td>
                    <td data-value="{{ column.max }}" data-numeric>{{ column.max | format_number }}</td>
                    {% else %}
                    <td data-value="nan" data-numeric></td>
                    <td data-value="nan" data-numeric></td>
                    <td data-value="nan" data-numeric></td>
                    {% endif %}

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</article>

{% include "no-filter-matches.html" %}
